"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4047],{2756:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>a,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>c,toc:()=>t});var d=l(4848),s=l(8453);const o={},i="\u6e2c\u8a66 K8S Pod \u6578\u91cf\u8d85\u904e 110 \u6703\u767c\u751f\u751a\u9ebc\u4e8b?",c={id:"test/\u6e2c\u8a66-K8S-Pod-\u6578\u91cf\u8d85\u904e-110-\u6703\u767c\u751f\u751a\u9ebc\u4e8b",title:"\u6e2c\u8a66 K8S Pod \u6578\u91cf\u8d85\u904e 110 \u6703\u767c\u751f\u751a\u9ebc\u4e8b?",description:"Preface",source:"@site/docs/test/\u6e2c\u8a66-K8S-Pod-\u6578\u91cf\u8d85\u904e-110-\u6703\u767c\u751f\u751a\u9ebc\u4e8b.md",sourceDirName:"test",slug:"/test/\u6e2c\u8a66-K8S-Pod-\u6578\u91cf\u8d85\u904e-110-\u6703\u767c\u751f\u751a\u9ebc\u4e8b",permalink:"/docs/test/\u6e2c\u8a66-K8S-Pod-\u6578\u91cf\u8d85\u904e-110-\u6703\u767c\u751f\u751a\u9ebc\u4e8b",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/test/\u6e2c\u8a66-K8S-Pod-\u6578\u91cf\u8d85\u904e-110-\u6703\u767c\u751f\u751a\u9ebc\u4e8b.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Deployment Tomcat on k8s & \u900f\u904e https \u8a2a\u554f",permalink:"/docs/test/Deployment-Tomcat-on-k8s-&-\u900f\u904e-https-\u8a2a\u554f"}},a={},t=[{value:"Preface",id:"preface",level:2},{value:"\u6e2c\u8a66\u74b0\u5883",id:"\u6e2c\u8a66\u74b0\u5883",level:2},{value:"1M2W \u7684\u67b6\u69cb",id:"1m2w-\u7684\u67b6\u69cb",level:3},{value:"\u55ae\u53f0\u7bc0\u9ede\u5141\u8a31\u57f7\u884c Pod \u7684\u6578\u91cf",id:"\u55ae\u53f0\u7bc0\u9ede\u5141\u8a31\u57f7\u884c-pod-\u7684\u6578\u91cf",level:3},{value:"1. \u5efa\u7acb\u6e2c\u8a66 Deployment Yaml \u6a94",id:"1-\u5efa\u7acb\u6e2c\u8a66-deployment-yaml-\u6a94",level:2},{value:"2. \u6aa2\u8996 w2 \u7bc0\u9ede\u4e0a\u6709\u5e7e\u500b Pod",id:"2-\u6aa2\u8996-w2-\u7bc0\u9ede\u4e0a\u6709\u5e7e\u500b-pod",level:2},{value:"3. \u90e8\u5c6c Deployment Yaml \u6a94",id:"3-\u90e8\u5c6c-deployment-yaml-\u6a94",level:2},{value:"4. \u6aa2\u8996\u90e8\u5c6c\u72c0\u614b",id:"4-\u6aa2\u8996\u90e8\u5c6c\u72c0\u614b",level:2},{value:"5. \u628a Pod \u6578\u91cf Scale \u5230 20 \u500b",id:"5-\u628a-pod-\u6578\u91cf-scale-\u5230-20-\u500b",level:2},{value:"6. \u6aa2\u8996\u90e8\u5c6c\u72c0\u614b",id:"6-\u6aa2\u8996\u90e8\u5c6c\u72c0\u614b",level:2},{value:"7. \u628a Pod \u6578\u91cf Scale \u5230 107 \u500b",id:"7-\u628a-pod-\u6578\u91cf-scale-\u5230-107-\u500b",level:2},{value:"8. \u6aa2\u8996\u90e8\u5c6c\u72c0\u614b",id:"8-\u6aa2\u8996\u90e8\u5c6c\u72c0\u614b",level:2},{value:"9. \u628a Pod \u6578\u91cf Scale \u5230 108 \u500b (\u6b64\u6642\u7e3d\u91cf\u6703\u8d85\u904e 110)",id:"9-\u628a-pod-\u6578\u91cf-scale-\u5230-108-\u500b-\u6b64\u6642\u7e3d\u91cf\u6703\u8d85\u904e-110",level:2},{value:"10. \u6aa2\u8996\u90e8\u5c6c\u72c0\u614b",id:"10-\u6aa2\u8996\u90e8\u5c6c\u72c0\u614b",level:2},{value:"11. \u67e5\u770b\u72c0\u614b\u70ba OutOfpods \u7684 Deployment Pod \u7e3d\u6578",id:"11-\u67e5\u770b\u72c0\u614b\u70ba-outofpods-\u7684-deployment-pod-\u7e3d\u6578",level:2},{value:"12. \u67e5\u770b Deployment \u72c0\u614b",id:"12-\u67e5\u770b-deployment-\u72c0\u614b",level:2},{value:"13. \u67e5\u770b replicaset \u72c0\u614b",id:"13-\u67e5\u770b-replicaset-\u72c0\u614b",level:2},{value:"14. \u67e5\u770b node \u8cc7\u6e90\u4f7f\u7528\u91cf",id:"14-\u67e5\u770b-node-\u8cc7\u6e90\u4f7f\u7528\u91cf",level:2},{value:"15. \u67e5\u770b\u72c0\u614b\u70ba Running \u7684 Pod \u662f\u5426\u6709\u88ab\u5f71\u97ff",id:"15-\u67e5\u770b\u72c0\u614b\u70ba-running-\u7684-pod-\u662f\u5426\u6709\u88ab\u5f71\u97ff",level:2},{value:"16. \u67e5\u770b \u72c0\u614b\u70ba OutOfpods \u7684 Pod \u8a73\u7d30\u8cc7\u8a0a",id:"16-\u67e5\u770b-\u72c0\u614b\u70ba-outofpods-\u7684-pod-\u8a73\u7d30\u8cc7\u8a0a",level:2},{value:"17. \u518d\u6b21\u67e5\u770b\u72c0\u614b\u70ba OutOfpods \u7684 Deployment Pod \u7e3d\u6578",id:"17-\u518d\u6b21\u67e5\u770b\u72c0\u614b\u70ba-outofpods-\u7684-deployment-pod-\u7e3d\u6578",level:2},{value:"\u7d50\u8ad6",id:"\u7d50\u8ad6",level:2}];function r(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.h1,{id:"\u6e2c\u8a66-k8s-pod-\u6578\u91cf\u8d85\u904e-110-\u6703\u767c\u751f\u751a\u9ebc\u4e8b",children:"\u6e2c\u8a66 K8S Pod \u6578\u91cf\u8d85\u904e 110 \u6703\u767c\u751f\u751a\u9ebc\u4e8b?"}),"\n",(0,d.jsx)(n.h2,{id:"preface",children:"Preface"}),"\n",(0,d.jsx)("div",{class:"indent-title-1",children:(0,d.jsx)(n.p,{children:"\u672c\u7bc7\u6587\u7ae0\u6703\u4ecb\u7d39\uff0c\u5728 Kubernetes \u4e2d\uff0c\u5982\u679c\u55ae\u4e00\u53f0\u7bc0\u9ede\u4e0a Pod \u7684\u6578\u91cf\u8d85\u904e 110 \u500b\u6703\u767c\u751f\u751a\u9ebc\u4e8b?"})}),"\n",(0,d.jsx)(n.h2,{id:"\u6e2c\u8a66\u74b0\u5883",children:"\u6e2c\u8a66\u74b0\u5883"}),"\n",(0,d.jsx)(n.h3,{id:"1m2w-\u7684\u67b6\u69cb",children:"1M2W \u7684\u67b6\u69cb"}),"\n",(0,d.jsxs)("div",{class:"indent-title-1",children:[(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"$ kubectl get nodes -o wide\n"})}),(0,d.jsx)(n.p,{children:"\u87a2\u5e55\u8f38\u51fa :"}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"NAME        STATUS   ROLES           AGE   VERSION   INTERNAL-IP   EXTERNAL-IP   OS-IMAGE         KERNEL-VERSION   CONTAINER-RUNTIME\nantony-m1   Ready    control-plane   46m   v1.29.0   172.20.0.31   <none>        Talos (v1.6.1)   6.1.69-talos     containerd://1.7.11\nantony-w1   Ready    worker          46m   v1.29.0   172.20.0.32   <none>        Talos (v1.6.1)   6.1.69-talos     containerd://1.7.11\nantony-w2   Ready    worker          46m   v1.29.0   172.20.0.33   <none>        Talos (v1.6.1)   6.1.69-talos     containerd://1.7.11\n"})})]}),"\n",(0,d.jsx)(n.h3,{id:"\u55ae\u53f0\u7bc0\u9ede\u5141\u8a31\u57f7\u884c-pod-\u7684\u6578\u91cf",children:"\u55ae\u53f0\u7bc0\u9ede\u5141\u8a31\u57f7\u884c Pod \u7684\u6578\u91cf"}),"\n",(0,d.jsxs)("div",{class:"indent-title-1",children:[(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'$ kubectl get nodes -o yaml | grep -A 11 "allocatable:$"\n'})}),(0,d.jsx)(n.p,{children:"\u87a2\u5e55\u8f38\u51fa :"}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'    allocatable:\n      cpu: 9950m\n      ephemeral-storage: "95171693615"\n      hugepages-2Mi: "0"\n      memory: 32550712Ki\n      pods: "110"\n    capacity:\n      cpu: "10"\n      ephemeral-storage: 101132Mi\n      hugepages-2Mi: "0"\n      memory: 32849720Ki\n      pods: "110"\n--\n    allocatable:\n      cpu: 9950m\n      ephemeral-storage: "95171693615"\n      hugepages-2Mi: "0"\n      memory: 32550704Ki\n      pods: "110"\n    capacity:\n      cpu: "10"\n      ephemeral-storage: 101132Mi\n      hugepages-2Mi: "0"\n      memory: 32849712Ki\n      pods: "110"\n--\n    allocatable:\n      cpu: 9950m\n      ephemeral-storage: "95171693615"\n      hugepages-2Mi: "0"\n      memory: 32550712Ki\n      pods: "110"\n    capacity:\n      cpu: "10"\n      ephemeral-storage: 101132Mi\n      hugepages-2Mi: "0"\n      memory: 32849720Ki\n      pods: "110"\n'})}),(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsx)(n.p,{children:"\u4e09\u53f0 Node \u6700\u591a\u90fd\u53ea\u80fd Run 110 \u500b Pods"}),"\n"]})]}),"\n",(0,d.jsx)(n.h2,{id:"1-\u5efa\u7acb\u6e2c\u8a66-deployment-yaml-\u6a94",children:"1. \u5efa\u7acb\u6e2c\u8a66 Deployment Yaml \u6a94"}),"\n",(0,d.jsx)("div",{class:"indent-title-1",children:(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'$ cat <<EOF > deployment-w2.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: alp\n  labels:\n    node: w2\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      node: w2\n  template:\n    metadata:\n      labels:\n        node: w2\n    spec:\n      containers:\n      - name: alpine\n        image: quay.io/cloudwalker/alp.base:latest\n        command: ["/bin/sleep", "infinity"]\n        imagePullPolicy: IfNotPresent\n      tolerations:\n      - operator: Exists\n      nodeName: antony-w2\nEOF\n'})})}),"\n",(0,d.jsx)(n.h2,{id:"2-\u6aa2\u8996-w2-\u7bc0\u9ede\u4e0a\u6709\u5e7e\u500b-pod",children:"2. \u6aa2\u8996 w2 \u7bc0\u9ede\u4e0a\u6709\u5e7e\u500b Pod"}),"\n",(0,d.jsxs)("div",{class:"indent-title-1",children:[(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-!",children:"$ kubectl get pods -n kube-system -o wide | grep 'antony-w2'\n"})}),(0,d.jsx)(n.p,{children:"\u87a2\u5e55\u8f38\u51fa :"}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"coredns-85b955d87b-jjkwh  1/1  Running  0            57m  10.244.0.7   antony-w2\nkube-flannel-q95bd        1/1  Running  2 (62m ago)  79m  172.20.0.33  antony-w2\nkube-proxy-h8k74          1/1  Running  2 (62m ago)  79m  172.20.0.33  antony-w2\n"})}),(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsx)(n.p,{children:"\u76ee\u524d\u5728 antony-w2 \u7bc0\u9ede\u4e0a\u5df2\u6709 3 \u53f0 pods"}),"\n"]})]}),"\n",(0,d.jsx)(n.h2,{id:"3-\u90e8\u5c6c-deployment-yaml-\u6a94",children:"3. \u90e8\u5c6c Deployment Yaml \u6a94"}),"\n",(0,d.jsx)("div",{class:"indent-title-1",children:(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"$ kubectl apply -f deployment-w2.yaml\n"})})}),"\n",(0,d.jsx)(n.h2,{id:"4-\u6aa2\u8996\u90e8\u5c6c\u72c0\u614b",children:"4. \u6aa2\u8996\u90e8\u5c6c\u72c0\u614b"}),"\n",(0,d.jsxs)("div",{class:"indent-title-1",children:[(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-!",children:"$ kubectl get pods -l node=w2\n"})}),(0,d.jsx)(n.p,{children:"\u87a2\u5e55\u8f38\u51fa :"}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"NAME                 READY   STATUS    RESTARTS   AGE\nalp-8d96b675-jmkdb   1/1     Running   0          7s\nalp-8d96b675-t4x2v   1/1     Running   0          7s\nalp-8d96b675-xmp2b   1/1     Running   0          7s\n"})})]}),"\n",(0,d.jsx)(n.h2,{id:"5-\u628a-pod-\u6578\u91cf-scale-\u5230-20-\u500b",children:"5. \u628a Pod \u6578\u91cf Scale \u5230 20 \u500b"}),"\n",(0,d.jsx)("div",{class:"indent-title-1",children:(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-!",children:"$ kubectl scale deploy alp --replicas=20\n"})})}),"\n",(0,d.jsx)(n.h2,{id:"6-\u6aa2\u8996\u90e8\u5c6c\u72c0\u614b",children:"6. \u6aa2\u8996\u90e8\u5c6c\u72c0\u614b"}),"\n",(0,d.jsxs)("div",{class:"indent-title-1",children:[(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-!",children:"$ kubectl get pods -l node=w2\n"})}),(0,d.jsx)(n.p,{children:"\u87a2\u5e55\u8f38\u51fa :"}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"NAME                 READY   STATUS    RESTARTS   AGE\nalp-8d96b675-5b7gq   1/1     Running   0          34s\nalp-8d96b675-824tt   1/1     Running   0          34s\nalp-8d96b675-9q8jn   1/1     Running   0          34s\nalp-8d96b675-cgbxq   1/1     Running   0          34s\nalp-8d96b675-cp59z   1/1     Running   0          34s\nalp-8d96b675-d8775   1/1     Running   0          34s\nalp-8d96b675-dbh5r   1/1     Running   0          34s\nalp-8d96b675-g58ks   1/1     Running   0          34s\nalp-8d96b675-gjlqp   1/1     Running   0          34s\nalp-8d96b675-jmkdb   1/1     Running   0          8m6s\nalp-8d96b675-jtfx7   1/1     Running   0          34s\nalp-8d96b675-khrsq   1/1     Running   0          34s\nalp-8d96b675-l7sgf   1/1     Running   0          34s\nalp-8d96b675-n7ghc   1/1     Running   0          34s\nalp-8d96b675-p8cvs   1/1     Running   0          34s\nalp-8d96b675-s9xd6   1/1     Running   0          34s\nalp-8d96b675-t4x2v   1/1     Running   0          8m6s\nalp-8d96b675-xmp2b   1/1     Running   0          8m6s\nalp-8d96b675-z5dz7   1/1     Running   0          34s\nalp-8d96b675-zv6p7   1/1     Running   0          34s\n"})})]}),"\n",(0,d.jsx)(n.h2,{id:"7-\u628a-pod-\u6578\u91cf-scale-\u5230-107-\u500b",children:"7. \u628a Pod \u6578\u91cf Scale \u5230 107 \u500b"}),"\n",(0,d.jsx)("div",{class:"indent-title-1",children:(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-!",children:"$ kubectl scale deploy alp --replicas=107\n"})})}),"\n",(0,d.jsx)(n.h2,{id:"8-\u6aa2\u8996\u90e8\u5c6c\u72c0\u614b",children:"8. \u6aa2\u8996\u90e8\u5c6c\u72c0\u614b"}),"\n",(0,d.jsxs)("div",{class:"indent-title-1",children:[(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-!",children:"$ kubectl get pods -l node=w2 --no-headers=true | grep 'Running' | wc -l\n"})}),(0,d.jsx)(n.p,{children:"\u87a2\u5e55\u8f38\u51fa :"}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"107\n"})})]}),"\n",(0,d.jsx)(n.h2,{id:"9-\u628a-pod-\u6578\u91cf-scale-\u5230-108-\u500b-\u6b64\u6642\u7e3d\u91cf\u6703\u8d85\u904e-110",children:"9. \u628a Pod \u6578\u91cf Scale \u5230 108 \u500b (\u6b64\u6642\u7e3d\u91cf\u6703\u8d85\u904e 110)"}),"\n",(0,d.jsx)("div",{class:"indent-title-1",children:(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-!",children:"$ kubectl scale deploy alp --replicas=108\n"})})}),"\n",(0,d.jsx)(n.h2,{id:"10-\u6aa2\u8996\u90e8\u5c6c\u72c0\u614b",children:"10. \u6aa2\u8996\u90e8\u5c6c\u72c0\u614b"}),"\n",(0,d.jsxs)("div",{class:"indent-title-1",children:[(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-!",children:"$ kubectl get pods -l node=w2\n"})}),(0,d.jsx)(n.p,{children:"\u87a2\u5e55\u8f38\u51fa :"}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"NAME                   READY   STATUS      RESTARTS   AGE\nalp-779f49464f-24r7q   1/1     Running     0          2m57s\nalp-779f49464f-26245   1/1     Running     0          2m58s\nalp-779f49464f-2h85w   0/1     OutOfpods   0          2s\nalp-779f49464f-2h896   1/1     Running     0          2m58s\nalp-779f49464f-2hcp8   1/1     Running     0          2m58s\nalp-779f49464f-2lcc4   1/1     Running     0          2m57s\nalp-779f49464f-2ndqf   1/1     Running     0          2m58s\nalp-779f49464f-2w2ct   1/1     Running     0          4m27s\nalp-779f49464f-2x9fn   1/1     Running     0          4m27s\nalp-779f49464f-2xb5q   0/1     OutOfpods   0          4s\nalp-779f49464f-42gq5   1/1     Running     0          2m56s\nalp-779f49464f-48zhp   0/1     OutOfpods   0          5s\nalp-779f49464f-4hbtq   0/1     OutOfpods   0          2s\nalp-779f49464f-4jvzs   1/1     Running     0          2m59s\nalp-779f49464f-4lvgr   1/1     Running     0          2m59s\nalp-779f49464f-4qmgk   0/1     OutOfpods   0          0s\n...\u4ee5\u4e0b\u592a\u591a\u7701\u7565\n"})}),(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsxs)(n.p,{children:["\u6b64\u6642\u6703\u6709\u4e00\u5806 Pod \u7684 STATUS \u5448\u73fe ",(0,d.jsx)(n.code,{children:"OutOfpods"}),"\uff0c\u4e26\u4e14 STATUS \u662f ",(0,d.jsx)(n.code,{children:"OutOfpods"})," \u7684 Pod \u7e3d\u6578\u9084\u6703\u4e0d\u65b7\u589e\u9577"]}),"\n"]})]}),"\n",(0,d.jsx)(n.h2,{id:"11-\u67e5\u770b\u72c0\u614b\u70ba-outofpods-\u7684-deployment-pod-\u7e3d\u6578",children:"11. \u67e5\u770b\u72c0\u614b\u70ba OutOfpods \u7684 Deployment Pod \u7e3d\u6578"}),"\n",(0,d.jsxs)("div",{class:"indent-title-1",children:[(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-!",children:"$ kubectl get pods -l node=w2 | grep OutOfpods | wc -l\n"})}),(0,d.jsx)(n.p,{children:"\u87a2\u5e55\u8f38\u51fa :"}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"5824\n"})})]}),"\n",(0,d.jsx)(n.h2,{id:"12-\u67e5\u770b-deployment-\u72c0\u614b",children:"12. \u67e5\u770b Deployment \u72c0\u614b"}),"\n",(0,d.jsxs)("div",{class:"indent-title-1",children:[(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-!",children:"$ kubectl get deploy alp\n"})}),(0,d.jsx)(n.p,{children:"\u87a2\u5e55\u8f38\u51fa :"}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"NAME   READY     UP-TO-DATE   AVAILABLE   AGE\nalp    107/108   108          107         11m\n"})}),(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsxs)(n.p,{children:["\u72c0\u614b\u662f ",(0,d.jsx)(n.code,{children:"OutOfpods"})," \u7684 pod \u770b\u8d77\u4f86\u4e26\u6c92\u6709\u88ab Deployment Controller \u638c\u7ba1"]}),"\n"]})]}),"\n",(0,d.jsx)(n.h2,{id:"13-\u67e5\u770b-replicaset-\u72c0\u614b",children:"13. \u67e5\u770b replicaset \u72c0\u614b"}),"\n",(0,d.jsxs)("div",{class:"indent-title-1",children:[(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-!",children:"$ kubectl get rs\n"})}),(0,d.jsx)(n.p,{children:"\u87a2\u5e55\u8f38\u51fa :"}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"NAME             DESIRED   CURRENT   READY   AGE\nalp-779f49464f   108       108       107     16m\n"})}),(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsxs)(n.p,{children:["\u72c0\u614b\u662f ",(0,d.jsx)(n.code,{children:"OutOfpods"})," \u7684 pod \u770b\u8d77\u4f86\u4e5f\u6c92\u6709\u88ab Replicaset Controller \u8a18\u9304\u4e0b\u4f86"]}),"\n"]})]}),"\n",(0,d.jsx)(n.h2,{id:"14-\u67e5\u770b-node-\u8cc7\u6e90\u4f7f\u7528\u91cf",children:"14. \u67e5\u770b node \u8cc7\u6e90\u4f7f\u7528\u91cf"}),"\n",(0,d.jsxs)("div",{class:"indent-title-1",children:[(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-!",children:"$ kubectl top nodes\n"})}),(0,d.jsx)(n.p,{children:"\u87a2\u5e55\u8f38\u51fa :"}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"NAME        CPU(cores)   CPU%   MEMORY(bytes)   MEMORY%\nantony-m1   243m         2%     1595Mi          5%\nantony-w1   9m           0%     609Mi           1%\nantony-w2   1227m        12%    1334Mi          4%\n"})})]}),"\n",(0,d.jsx)(n.h2,{id:"15-\u67e5\u770b\u72c0\u614b\u70ba-running-\u7684-pod-\u662f\u5426\u6709\u88ab\u5f71\u97ff",children:"15. \u67e5\u770b\u72c0\u614b\u70ba Running \u7684 Pod \u662f\u5426\u6709\u88ab\u5f71\u97ff"}),"\n",(0,d.jsxs)("div",{class:"indent-title-1",children:[(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-!",children:"$ kubectl get pods -l node=w2 | grep -i runn | wc -l\n"})}),(0,d.jsx)(n.p,{children:"\u87a2\u5e55\u8f38\u51fa :"}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"107\n"})})]}),"\n",(0,d.jsx)(n.h2,{id:"16-\u67e5\u770b-\u72c0\u614b\u70ba-outofpods-\u7684-pod-\u8a73\u7d30\u8cc7\u8a0a",children:"16. \u67e5\u770b \u72c0\u614b\u70ba OutOfpods \u7684 Pod \u8a73\u7d30\u8cc7\u8a0a"}),"\n",(0,d.jsxs)("div",{class:"indent-title-1",children:[(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-!",children:"$ kubectl describe pod alp-779f49464f-zspj6\n"})}),(0,d.jsx)(n.p,{children:"\u87a2\u5e55\u8f38\u51fa :"}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-!",children:"Name:             alp-779f49464f-zspj6\nNamespace:        default\nPriority:         0\nService Account:  default\nNode:             antony-w2/\nStart Time:       Mon, 25 Dec 2023 23:21:25 +0800\nLabels:           node=w2\n                  pod-template-hash=779f49464f\nAnnotations:      <none>\nStatus:           Failed\nReason:           OutOfpods\nMessage:          Pod was rejected: Node didn't have enough resource: pods, requested: 1, used: 110, capacity: 110\nIP:\nIPs:              <none>\nControlled By:    ReplicaSet/alp-779f49464f\nContainers:\n  alpine:\n    Image:      quay.io/cloudwalker/alp.base:latest\n    Port:       <none>\n    Host Port:  <none>\n    Command:\n      /bin/sleep\n      infinity\n    Environment:  <none>\n    Mounts:\n      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-qgkvc (ro)\nVolumes:\n  kube-api-access-qgkvc:\n    Type:                    Projected (a volume that contains injected data from multiple sources)\n    TokenExpirationSeconds:  3607\n    ConfigMapName:           kube-root-ca.crt\n    ConfigMapOptional:       <nil>\n    DownwardAPI:             true\nQoS Class:                   BestEffort\nNode-Selectors:              <none>\nTolerations:                 op=Exists\nEvents:\n  Type     Reason     Age   From     Message\n  ----     ------     ----  ----     -------\n  Warning  OutOfpods  12m   kubelet  Node didn't have enough resource: pods, requested: 1, used: 110, capacity: 110\n"})}),(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsxs)(n.p,{children:["\u770b\u5230 Event: ",(0,d.jsx)(n.code,{children:"Node didn't have enough resource: pods, requested: 1, used: 110, capacity: 110"}),"\nPod \u4e5f\u4e26\u672a\u5f97\u5230 IP Address\u3002"]}),"\n"]})]}),"\n",(0,d.jsx)(n.h2,{id:"17-\u518d\u6b21\u67e5\u770b\u72c0\u614b\u70ba-outofpods-\u7684-deployment-pod-\u7e3d\u6578",children:"17. \u518d\u6b21\u67e5\u770b\u72c0\u614b\u70ba OutOfpods \u7684 Deployment Pod \u7e3d\u6578"}),"\n",(0,d.jsxs)("div",{class:"indent-title-1",children:[(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-!",children:"$ kubectl get pods -l node=w2 | grep OutOfpods | wc -l\n"})}),(0,d.jsx)(n.p,{children:"\u87a2\u5e55\u8f38\u51fa :"}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"11141\n"})}),(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsxs)(n.p,{children:["\u72c0\u614b\u70ba OutOfpods \u7684 Deployment Pod \u7e3d\u6578\u6703\u4e00\u76f4\u589e\u52a0\uff0c\u6700\u5f8c\u6e2c\u5230 ",(0,d.jsx)(n.code,{children:"12529"})," \u500b\u4e0d\u60f3\u7b49\u4e86\u3002"]}),"\n"]})]}),"\n",(0,d.jsx)(n.h2,{id:"\u7d50\u8ad6",children:"\u7d50\u8ad6"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.strong,{children:"\u5373\u4f7f\u7bc0\u9ede\u7684 CPU\u3001\u8a18\u61b6\u9ad4\u3001Disk ...\u7b49\u786c\u9ad4\u8cc7\u6e90\u5f88\u5920\u529b\uff0c\u4f46\u53ea\u8981\u5728\u55ae\u4e00\u7bc0\u9ede\u4e0a kubelet \u6aa2\u67e5\u5230\u8d85\u904e 110 \u500b Pod \u7e3d\u6578\uff0c\u65b0\u5efa\u7acb\u7684 Pod \u662f\u7121\u6cd5 Running \u7684"})}),"\n",(0,d.jsx)(n.li,{children:"\u72c0\u614b\u70ba OutOfpods \u7684 Deployment Pod \u7e3d\u6578\u6703\u4e00\u76f4\u589e\u52a0\u4f3c\u4e4e\u6703\u4e00\u76f4\u589e\u52a0\u5230 Node \u7684\u8cc7\u6e90\u88ab\u4f7f\u7528\u5b8c\u7562"}),"\n",(0,d.jsxs)(n.li,{children:["\u72c0\u614b\u70ba OutOfpods \u7684 Deployment Pod \u7e3d\u6578\u6703\u4e00\u76f4\u589e\u52a0\u7684\u539f\u56e0\uff0c\u63a8\u6e2c\u662f\u56e0\u70ba Deployment \u9700\u8981\u628a Pod \u6578\u91cf\u64f4\u5145\u5230 108 \u500b\u4e26\u4e14\u72c0\u614b\u90fd\u662f ",(0,d.jsx)(n.code,{children:"Running"}),"\uff0c\u4f46\u662f\u65b0\u5efa\u7acb\u51fa\u4f86\u7684 Pod \u56e0\u70ba\u8d85\u904e ",(0,d.jsx)(n.code,{children:"max-pods=110"})," \u7684\u9650\u5236\uff0c\u6240\u4ee5\u72c0\u614b\u4e00\u76f4\u662f ",(0,d.jsx)(n.code,{children:"OutOfpods"}),"\uff0c\u4e00\u76f4\u7121\u9650\u5faa\u74b0\u3002"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(r,{...e})}):r(e)}},8453:(e,n,l)=>{l.d(n,{R:()=>i,x:()=>c});var d=l(6540);const s={},o=d.createContext(s);function i(e){const n=d.useContext(o);return d.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),d.createElement(o.Provider,{value:n},e.children)}}}]);